matrix:
  include:
    - language: node_js
      cache:
        directories:
          - ~/.npm
          - "node_modules"
      node_js: 9
      before_install:
        - cd javascript
        - ./scripts/run-on-node-version.sh 9 "npm install -g greenkeeper-lockfile@1"
      before_script:
        - ./scripts/run-on-node-version.sh 9 "greenkeeper-lockfile-update"
      script:
        - npm run verify
      after_success:
        - npm install -g travis-deploy-once@4
        - travis-deploy-once "npm run semantic-release"
        - ./scripts/run-on-node-version.sh 9 "npm install --no-save coveralls && npm run coveralls"
        - ./scripts/run-on-node-version.sh 9 "npm install --no-save codecov && npm run codecov"
      after_script:
        - ./scripts/run-on-node-version.sh 9 "greenkeeper-lockfile-upload"
    - language: node_js
      cache:
        directories:
          - ~/.npm
          - "node_modules"
      node_js: 8
      before_install:
        - cd javascript
        - ./scripts/run-on-node-version.sh 9 "npm install -g greenkeeper-lockfile@1"
      before_script:
        - ./scripts/run-on-node-version.sh 9 "greenkeeper-lockfile-update"
      script:
        - npm run verify
      after_success:
        - npm install -g travis-deploy-once@4
        - travis-deploy-once "npm run semantic-release"
        - ./scripts/run-on-node-version.sh 9 "npm install --no-save coveralls && npm run coveralls"
        - ./scripts/run-on-node-version.sh 9 "npm install --no-save codecov && npm run codecov"
      after_script:
        - ./scripts/run-on-node-version.sh 9 "greenkeeper-lockfile-upload"
    - language: node_js
      cache:
        directories:
          - ~/.npm
          - "node_modules"
      node_js: 6
      before_install:
        - cd javascript
        - ./scripts/run-on-node-version.sh 9 "npm install -g greenkeeper-lockfile@1"
      before_script:
        - ./scripts/run-on-node-version.sh 9 "greenkeeper-lockfile-update"
      script:
        - npm run verify
      after_success:
        - npm install -g travis-deploy-once@4
        - travis-deploy-once "npm run semantic-release"
        - ./scripts/run-on-node-version.sh 9 "npm install --no-save coveralls && npm run coveralls"
        - ./scripts/run-on-node-version.sh 9 "npm install --no-save codecov && npm run codecov"
      after_script:
        - ./scripts/run-on-node-version.sh 9 "greenkeeper-lockfile-upload"
branches:
  only:
    - master
    - /^greenkeeper.*$/
notifications:
  email: false
